<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ed's Fun Website</title>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f0f0f0; color:#333; transition:0.3s; }
body.dark { background:#121212; color:#eee; }
.centered { display:flex; justify-content:center; align-items:center; height:100vh; gap:50px; }
button.main-btn { padding:20px 40px; background:#000; color:#fff; border:none; cursor:pointer; font-size:20px; border-radius:8px; transition:0.3s; }
button.main-btn.italic { font-style:italic; }
button.main-btn:hover { background:#333; }
.hidden { display:none !important; }
.page { padding:20px; }
.duck-img { width:200px; cursor:pointer; }
.notes-container { display:flex; gap:20px; }
.note-input { flex:1; display:flex; flex-direction:column; gap:10px; }
.note-input input, .note-input textarea { padding:10px; font-size:16px; border-radius:5px; border:1px solid #ccc; }
.note-list { width:200px; border-left:1px solid #ccc; padding-left:10px; }
.note-list button { width:100%; padding:8px; margin-bottom:5px; cursor:pointer; border-radius:5px; border:none; background:#333; color:#fff; text-align:left; }
.popup { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; z-index:1000; }
.popup-content { background:#fff; padding:20px; border-radius:10px; width:300px; max-width:80%; color:#000; }
body.dark .popup-content { background:#333; color:#fff; }
.popup-content input { width:100%; padding:8px; margin-bottom:10px; }
.popup-content button { margin-right:5px; }
.back-btn { margin-top:10px; background:#888; }
.dark-toggle { position:fixed; top:10px; right:10px; padding:10px; background:#2E8B57; color:white; border:none; border-radius:5px; cursor:pointer; }
</style>
</head>
<body>

<button class="dark-toggle" onclick="toggleDark()">Toggle Dark Mode</button>

<!-- Home -->
<div id="home" class="centered">
  <button class="main-btn" onclick="showDuckPage()">hehehe...</button>
  <button class="main-btn italic" onclick="showNotesPage()">Ed's Stuff...</button>
</div>

<!-- Duck Page -->
<div id="duckPage" class="page hidden">
  <button onclick="goHome()">Back</button>
  <h2>Click the duck!</h2>
  <div id="duck" style="font-size:200px; cursor:pointer; user-select:none;">ðŸ¦†</div>
  <audio id="quackAudio" src="https://www.soundjay.com/animal/duck-quack-01.mp3" preload="auto"></audio>
</div>

<!-- Notes Page -->
<div id="notesPage" class="page hidden">
  <button onclick="goHome()">Back</button>
  <h2>Ed's Notes</h2>
  <div class="notes-container">
    <div class="note-input">
      <input type="text" id="noteTitle" placeholder="Title">
      <textarea id="noteContent" placeholder="Write your note..."></textarea>
      <input type="password" id="notePassword" placeholder="Password (optional)">
      <button onclick="saveNote()">Save Note</button>
    </div>
    <div class="note-list" id="noteList">
      <!-- Notes buttons appear here -->
    </div>
  </div>
</div>

<!-- Popup -->
<div id="popup" class="popup hidden">
  <div class="popup-content" id="popupContent"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// --- Firebase config ---
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// --- Pages ---
function showDuckPage(){ document.getElementById('home').classList.add('hidden'); document.getElementById('duckPage').classList.remove('hidden'); }
function showNotesPage(){ document.getElementById('home').classList.add('hidden'); document.getElementById('notesPage').classList.remove('hidden'); renderNotes(); }
function goHome(){ document.getElementById('home').classList.remove('hidden'); document.getElementById('duckPage').classList.add('hidden'); document.getElementById('notesPage').classList.add('hidden'); }

// --- Duck ---
const duck = document.getElementById('duck');
const quackAudio = document.getElementById('quackAudio');

function quack(){ quackAudio.currentTime = 0; quackAudio.play(); }
duck.addEventListener('click', quack);

// --- Dark mode ---
let darkMode = false;
function toggleDark(){ darkMode = !darkMode; document.body.classList.toggle('dark', darkMode); }

// --- Notes ---
async function saveNote(){
  const title = document.getElementById('noteTitle').value.trim();
  const content = document.getElementById('noteContent').value.trim();
  const password = document.getElementById('notePassword').value;
  if(!title||!content){ alert('Title and content required!'); return; }
  await db.collection('notes').add({title, content, password: password||"", createdAt: firebase.firestore.FieldValue.serverTimestamp()});
  document.getElementById('noteTitle').value=''; document.getElementById('noteContent').value=''; document.getElementById('notePassword').value='';
  renderNotes();
}

async function renderNotes(){
  const noteList = document.getElementById('noteList');
  noteList.innerHTML='';
  const snapshot = await db.collection('notes').orderBy('createdAt','desc').get();
  snapshot.forEach(doc=>{
    const note = doc.data();
    note.id = doc.id; // save doc id for deletion
    const btn = document.createElement('button');
    btn.textContent = note.title;
    btn.onclick = ()=> openNote(note);
    noteList.appendChild(btn);
  });
}

function openNote(note){
  if(note.password){
    showPopup(`Enter password for "${note.title}"`, true, (pass)=>{
      if(pass===note.password){ showNoteContent(note); }
      else { alert('Wrong password!'); }
    });
  } else showNoteContent(note);
}

function showNoteContent(note){
  showPopup(`<h3>${note.title}</h3><p>${note.content.replace(/\n/g,'<br>')}</p><button onclick="deleteNote('${note.id}')">Delete</button>`);
}

// --- Popup ---
function showPopup(html,input=false,callback=null){
  const popup=document.getElementById('popup');
  const content=document.getElementById('popupContent');
  content.innerHTML='';
  if(input){
    const p=document.createElement('p'); p.innerHTML=html; content.appendChild(p);
    const inp=document.createElement('input'); inp.type='password'; content.appendChild(inp);
    const okBtn=document.createElement('button'); okBtn.textContent='OK'; okBtn.onclick=()=>{ const val=inp.value; closePopup(); if(callback)callback(val); }; content.appendChild(okBtn);
    const backBtn=document.createElement('button'); backBtn.textContent='Back'; backBtn.classList.add('back-btn'); backBtn.onclick=closePopup; content.appendChild(backBtn);
  } else { content.innerHTML=html; const backBtn=document.createElement('button'); backBtn.textContent='Back'; backBtn.classList.add('back-btn'); backBtn.onclick=closePopup; content.appendChild(backBtn);}
  popup.classList.remove('hidden');
}

function closePopup(){ document.getElementById('popup').classList.add('hidden'); }

async function deleteNote(id){ await db.collection('notes').doc(id).delete(); renderNotes(); }

// --- Ensure popup is hidden on page load ---
document.getElementById('popup').classList.add('hidden');

</script>
</body>
  </html>
